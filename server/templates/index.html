<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aquarium Control Configuration</title>
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="index.css" rel="stylesheet">
  </head>
  <body>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <span class="navbar-brand">Aquarium Control Configuration</span>
        </div>
      </div>
    </div>

    <div id="container"></div>

    <script type="text/template" id="app_template">
      <h1>Status</h1>
      <p class="lead">Aquarium time: <%= time %><br/>
      Current lighting state: <%= state %></p>
      <ul class="list-group" id="scheduled_list"></ul>
    </script>

    <script type="text/template" id="schedule_template">
      <h4 class="list-group-item-heading"><%= title %></h4>
      <div><em>type:</em> <%= type%></div>
      <div><em>automatic:</em> <%= source.set %>, <%= source.event %></div>
      <div><em>manual:</em> <%= (time.hour < 10 ? '0' : '') + time.hour %>:<%= (time.minute < 10 ? '0' : '') + time.minute %></div>
      <div>
        <button type="button" class="btn btn-primary">Edit</button>
        <button type="button" class="btn btn-danger">Delete</button>
      </div>
    </script>

    <script src="lib/jquery.min.js"></script>
    <script src="lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="lib/underscore.min.js"></script>
    <script src="lib/backbone.min.js"></script>

    <script src="js/models/schedule_model.js"></script>
    <script src="js/collections/schedule_collection.js"></script>
    <script src="js/views/schedule_view.js"></script>

    <script src="js/models/app_model.js"></script>
    <script src="js/views/app_view.js"></script>

    <script>

      // Create the models
      $.when(
        (window.appModel = new AppModel()).fetch(),
        (window.scheduleCollection = new ScheduleCollection()).fetch()
      ).done(function () {
        // Create the views
        window.appView = new AppView({
          model: window.appModel,
          collection: window.scheduleCollection
        });
        appView.render();
      });
    </script>
  </body>
</html>
